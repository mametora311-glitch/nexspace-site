<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AIEC – プラン選択</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root {
      --bg:#0f172a; --panel:#0b1220; --border:#1f2a44; --text:#e2e8f0; --muted:#94a3b8; --accent:#22c55e;
    }
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:1120px;margin:0 auto;padding:24px}
    h1{margin:8px 0 16px;font-size:22px;font-weight:700}
    .help{color:var(--muted);font-size:14px;line-height:1.6;margin:8px 0 20px}
    #plans{display:grid;gap:16px;grid-template-columns:repeat(auto-fit,minmax(280px,1fr))}
    .card{background:var(--panel);border:1px solid var(--border);border-radius:12px;padding:16px}
    .tag{font-size:12px;color:#a78bfa;margin-left:6px}
    .features{margin:12px 0;padding-left:18px}
    .features li{margin:6px 0}
    .row{display:flex;align-items:center;gap:12px;flex-wrap:wrap;margin:12px 0}
    .pill{display:inline-flex;align-items:center;gap:8px;padding:2px;border-radius:999px;background:#0b1325;border:1px solid var(--border)}
    .pill label{display:inline-flex;align-items:center;gap:6px;padding:6px 10px;border-radius:999px;cursor:pointer}
    .pill input{appearance:none;width:14px;height:14px;border-radius:999px;border:2px solid #64748b}
    .pill input:checked{background:var(--accent);border-color:var(--accent)}
    button.primary{background:var(--accent);color:#052e16;border:0;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
    button.primary:disabled{opacity:.6;cursor:progress}
    .err{margin-top:16px;color:#ef4444}
  </style>

  <!-- ★ フロントで使う定数（必要に応じて値だけ編集） -->
  <script>
    (function(){
      // 与件の値が "https://https://..." でも動くよう正規化
      const RAW_GATE = "https://aiec-gate-766292311890.asia-northeast1.run.app";
      const GATE = String(RAW_GATE).replace(/^https?:\/\/https?:\/\//,'https://').replace(/\/+$/,'');
      const ORIGIN = location.origin.replace(/\/+$/,'');
      window.AIEC_GATE_BASE   = GATE;
      window.AIEC_SUCCESS_URL = ORIGIN + "/success/index.html";
      window.AIEC_CANCEL_URL  = ORIGIN + "/products/aiec-light/cancel/";
      window.AIEC_DOWNLOAD_URL= ORIGIN + "/download/index.html";
    })();
  </script>
</head>

<!-- AIEC プラン選択ページ -->

<body>
  <header style="padding: 20px 30px; text-align: left;">
    <a href="https://www.nexspace.jp/" 
       style="color: #ffffff; text-decoration: none; font-weight: bold; font-size: 16px;">
      ← トップページへ戻る
    </a>
  </header>

  <main style="max-width: 960px; margin: 0 auto; padding: 20px;">
    <h1>AIEC – プラン選択</h1>
    <p>ご利用手順</p>
    <ol>
      <li>プランと請求間隔を選択 →「申し込む」</li>
      <li>Stripeの決済画面で完了 → 自動で成功ページへ</li>
      <li>成功ページでライセンス確定 → 認証トークンでダウンロード</li>
    </ol>

    <div id="error" style="color:red; display:none; margin: 10px 0;"></div>
    <div id="plans" style="display:flex; flex-wrap:wrap; gap:20px; justify-content:center;"></div>
  </main>

  <script src="/js/buy.js?v=20251020" defer></script>

  <style>
    body {
      background-color: #0f172a;
      color: #e2e8f0;
      font-family: 'Segoe UI', sans-serif;
    }
    .card {
      background-color: #1e293b;
      border-radius: 12px;
      box-shadow: 0 0 8px rgba(0,0,0,0.3);
      width: 280px;
      padding: 20px;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      align-items: stretch;
    }
    .pill {
      display: flex;
      justify-content: center;
      gap: 8px;
      margin-bottom: 10px;
    }
    .pill label {
      display: flex;
      align-items: center;
      gap: 4px;
      cursor: pointer;
      font-size: 14px;
    }
    .primary {
      background-color: #10b981;
      border: none;
      color: white;
      padding: 10px;
      border-radius: 8px;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }
    .primary:hover {
      background-color: #059669;
    }
    a:hover {
      text-decoration: underline;
    }
  </style>
</body>
</html>