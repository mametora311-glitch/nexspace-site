<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AIEC – プラン選択</title>
  <meta name="color-scheme" content="light dark" />
  <style>
    :root{--bg:#0f172a;--panel:#0b1220;--border:#1f2a44;--text:#e2e8f0;--muted:#94a3b8;--accent:#22c55e;--accentText:#052e16}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,Segoe UI,Roboto,Helvetica,Arial}
    .wrap{max-width:1000px;margin:40px auto;padding:0 16px}
    .panel{background:var(--panel);border:1px solid var(--border);border-radius:16px;padding:20px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
    h1{margin:0 0 16px 0}
    .help{opacity:.85;margin:0 0 18px 0;line-height:1.7}
    #plans > .card{padding:16px;border:1px solid #263554;border-radius:12px;background:#0b1220;margin:14px 0}
    .badge{font-size:12px;background:#1d4ed8;color:#fff;padding:2px 8px;border-radius:999px;margin-left:8px}
    button{background:var(--accent);border:0;color:var(--accentText);padding:10px 14px;border-radius:10px;font-weight:700;cursor:pointer}
    button[disabled]{opacity:.6;cursor:not-allowed}
    select{background:#0b1220;color:#cbd5e1;border:1px solid #334155;padding:8px;border-radius:8px}
    .err{margin-top:12px;color:#fecaca}
    a{color:#93c5fd}
  </style>

  <!-- ▼ 設定（ゲートURLは重複プロトコルを正規化して利用） -->
  <script>
    (function(){
      const RAW_GATE   = "https://https://aiec-gate-766292311890.asia-northeast1.run.app";
      const GATE = RAW_GATE.replace(/^https?:\/\/https?:\/\//i,'https://').replace(/\/+$/,'');
      window.AIEC_GATE_BASE   = GATE;
      window.AIEC_SUCCESS_URL = "https://www.nexspace.jp/products/aiec-light/success/";
      window.AIEC_CANCEL_URL  = "https://www.nexspace.jp/products/aiec-light/cancel/";
    })();
  </script>
</head>
<body>
  <div class="wrap">
    <h1>AIEC – プラン選択</h1>
    <div class="panel">
      <p class="help">
        <strong>ご利用手順</strong><br>
        1. プランと請求間隔を選択 →「申し込む」<br>
        2. Stripeの決済画面で完了 → 自動で成功ページへ<br>
        3. 成功ページでライセンス確定 → 認証トークンでダウンロード
      </p>
      <div id="plans"></div>
      <div id="error" class="err" style="display:none"></div>
    </div>
  </div>

  <script src="/js/buy.js" defer></script>
</body>
</html>
